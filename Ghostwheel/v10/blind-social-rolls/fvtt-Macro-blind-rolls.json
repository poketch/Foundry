{
  "name": "blind rolls",
  "type": "script",
  "author": "4ft25hP617oXIBoS",
  "img": "icons/svg/dice-target.svg",
  "scope": "global",
  "command": "Hooks.on(\"createChatMessage\", main);\n\n// Set to Perception, Insight, Investigation\nconst always_blind = [\"prc\", \"ins\", \"inv\"];\n\nfunction main(args) {\n\n    console.log(\"running blind rolls macro\");\n    let data = args;\n\n    if (data.flags?.dnd5e?.roll?.type == null || data.flags?.dnd5e?.roll?.type == undefined) {\n        return;\n    }\n\n    if (data.flags?.dnd5e?.roll?.skillId == null || data.flags?.dnd5e?.roll?.skillId == undefined) {\n        return;\n    }\n\n    if (always_blind.includes(data.flags.dnd5e.roll.skillId)) {\n        \n        setProperty(data.rolls[0].options, \"defaultRollMode\", \"blindroll\");\n        setProperty(data, \"blind\", true);\n        setProperty(data, \"whisper\", game.users.filter(user => user.isGM).map(user => user.id));\n    }\n}",
  "flags": {
    "combat-utility-belt": {
      "macroTrigger": ""
    },
    "core": {
      "sourceId": "Compendium.world.macros.81ErlQ2OZGQtOCV6"
    },
    "exportSource": {
      "world": "ddf-friends-characters",
      "system": "dnd5e",
      "coreVersion": "10.288",
      "systemVersion": "2.0.3"
    }
  },
  "_stats": {
    "systemId": "dnd5e",
    "systemVersion": "2.0.3",
    "coreVersion": "10.288",
    "createdTime": 1666815284447,
    "modifiedTime": 1666815308637,
    "lastModifiedBy": "4ft25hP617oXIBoS"
  }
}